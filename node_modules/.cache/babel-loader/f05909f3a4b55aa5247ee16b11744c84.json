{"ast":null,"code":"var _jsxFileName = \"/home/leo/Dokument/GitHub/tibber/tibber-webapp/src/App.js\",\n    _s = $RefreshSig$();\n\nimport './App.css';\nimport CurrentPrice from './components/CurrentPrice'; //import TodaysPrices from './components/TodaysPrices';\n\nimport React, { useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [currentPrice, setCurrentPrice] = useState(null);\n  const [todaysPrices, setTodaysPrices] = useState(null);\n  const [tomorrowsPrices, setTomorrowsPrices] = useState(null);\n  const [data, setData] = useState(null);\n  const query = `query{\n\t\tviewer {\n\t\t\thomes {\n\t\t\t\tcurrentSubscription{\n\t\t\t\t\tpriceInfo{\n\t\t\t\t\t\tcurrent{\n\t\t\t\t\t\t\ttotal\n\t\t\t\t\t\t\tenergy\n\t\t\t\t\t\t\ttax\n\t\t\t\t\t\t\tstartsAt\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttoday {\n\t\t\t\t\t\t\ttotal\n\t\t\t\t\t\t\tenergy\n\t\t\t\t\t\t\ttax\n\t\t\t\t\t\t\tstartsAt\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttomorrow {\n\t\t\t\t\t\t\ttotal\n\t\t\t\t\t\t\tenergy\n\t\t\t\t\t\t\ttax\n\t\t\t\t\t\t\tstartsAt\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n  }`;\n\n  function handleData(data) {\n    console.log(data);\n    setTodaysPrices(data['viewer']['homes'][0]['currentSubscription']['priceInfo']['today']);\n    setTomorrowsPrices(data['viewer']['homes'][0]['currentSubscription']['priceInfo']['tomorrow']);\n    setCurrentPrice(data['viewer']['homes'][0]['currentSubscription']['priceInfo']['current']);\n  }\n\n  async function getPrices() {\n    console.log('Submitting');\n    let response = fetch('https://api.tibber.com/v1-beta/gql', {\n      method: 'POST',\n      headers: {\n        Authorization: 'Bearer QjAfeE7K_2jwxTx0k0TeSd7B_LUZjgYCqd-51M8BAtg',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        query\n      })\n    });\n    response.then(res => res.json()).then(data => handleData(data['data']));\n  }\n\n  useEffect(() => {\n    getPrices();\n  }, []);\n  useEffect(() => {\n    console.log(currentPrice);\n    console.log(todaysPrices);\n    console.log(tomorrowsPrices);\n  }, [currentPrice]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [currentPrice && /*#__PURE__*/_jsxDEV(CurrentPrice, {\n      currentPrice: currentPrice\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 21\n    }, this), tomorrowsPrices && /*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"tomorrowsPrices\",\n      children: \"Have tomorrows prices\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 3\n  }, this);\n}\n\n_s(App, \"HP+RSBN4+oR/Nyq+vDN608KBrGo=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/home/leo/Dokument/GitHub/tibber/tibber-webapp/src/App.js"],"names":["CurrentPrice","React","useState","useEffect","App","currentPrice","setCurrentPrice","todaysPrices","setTodaysPrices","tomorrowsPrices","setTomorrowsPrices","data","setData","query","handleData","console","log","getPrices","response","fetch","method","headers","Authorization","body","JSON","stringify","then","res","json"],"mappings":";;;AAAA,OAAO,WAAP;AACA,OAAOA,YAAP,MAAyB,2BAAzB,C,CACA;;AACA,OAAOC,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;;;AAEA,SAASC,GAAT,GAAe;AAAA;;AACd,QAAM,CAACC,YAAD,EAAeC,eAAf,IAAkCJ,QAAQ,CAAC,IAAD,CAAhD;AACA,QAAM,CAACK,YAAD,EAAeC,eAAf,IAAkCN,QAAQ,CAAC,IAAD,CAAhD;AACA,QAAM,CAACO,eAAD,EAAkBC,kBAAlB,IAAwCR,QAAQ,CAAC,IAAD,CAAtD;AACA,QAAM,CAACS,IAAD,EAAOC,OAAP,IAAkBV,QAAQ,CAAC,IAAD,CAAhC;AAEA,QAAMW,KAAK,GAAI;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IA3BC;;AA6BA,WAASC,UAAT,CAAoBH,IAApB,EAA0B;AACzBI,IAAAA,OAAO,CAACC,GAAR,CAAYL,IAAZ;AACAH,IAAAA,eAAe,CACdG,IAAI,CAAC,QAAD,CAAJ,CAAe,OAAf,EAAwB,CAAxB,EAA2B,qBAA3B,EAAkD,WAAlD,EAA+D,OAA/D,CADc,CAAf;AAGAD,IAAAA,kBAAkB,CACjBC,IAAI,CAAC,QAAD,CAAJ,CAAe,OAAf,EAAwB,CAAxB,EAA2B,qBAA3B,EAAkD,WAAlD,EAA+D,UAA/D,CADiB,CAAlB;AAGAL,IAAAA,eAAe,CACdK,IAAI,CAAC,QAAD,CAAJ,CAAe,OAAf,EAAwB,CAAxB,EAA2B,qBAA3B,EAAkD,WAAlD,EAA+D,SAA/D,CADc,CAAf;AAGA;;AAED,iBAAeM,SAAf,GAA2B;AAC1BF,IAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACA,QAAIE,QAAQ,GAAGC,KAAK,CAAC,oCAAD,EAAuC;AAC1DC,MAAAA,MAAM,EAAE,MADkD;AAE1DC,MAAAA,OAAO,EAAE;AACRC,QAAAA,aAAa,EAAE,oDADP;AAER,wBAAgB;AAFR,OAFiD;AAM1DC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAEZ,QAAAA;AAAF,OAAf;AANoD,KAAvC,CAApB;AAQAK,IAAAA,QAAQ,CAACQ,IAAT,CAAeC,GAAD,IAASA,GAAG,CAACC,IAAJ,EAAvB,EAAmCF,IAAnC,CAAyCf,IAAD,IAAUG,UAAU,CAACH,IAAI,CAAC,MAAD,CAAL,CAA5D;AACA;;AAEDR,EAAAA,SAAS,CAAC,MAAM;AACfc,IAAAA,SAAS;AACT,GAFQ,EAEN,EAFM,CAAT;AAIAd,EAAAA,SAAS,CAAC,MAAM;AACfY,IAAAA,OAAO,CAACC,GAAR,CAAYX,YAAZ;AACAU,IAAAA,OAAO,CAACC,GAAR,CAAYT,YAAZ;AACAQ,IAAAA,OAAO,CAACC,GAAR,CAAYP,eAAZ;AACA,GAJQ,EAIN,CAACJ,YAAD,CAJM,CAAT;AAMA,sBACC;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA,eACEA,YAAY,iBAAI,QAAC,YAAD;AAAc,MAAA,YAAY,EAAEA;AAA5B;AAAA;AAAA;AAAA;AAAA,YADlB,EAGEI,eAAe,iBACf;AAAI,MAAA,SAAS,EAAC,iBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAJF;AAAA;AAAA;AAAA;AAAA;AAAA,UADD;AASA;;GAhFQL,G;;KAAAA,G;AAkFT,eAAeA,GAAf","sourcesContent":["import './App.css';\nimport CurrentPrice from './components/CurrentPrice';\n//import TodaysPrices from './components/TodaysPrices';\nimport React, { useState, useEffect } from 'react';\n\nfunction App() {\n\tconst [currentPrice, setCurrentPrice] = useState(null);\n\tconst [todaysPrices, setTodaysPrices] = useState(null);\n\tconst [tomorrowsPrices, setTomorrowsPrices] = useState(null);\n\tconst [data, setData] = useState(null);\n\n\tconst query = `query{\n\t\tviewer {\n\t\t\thomes {\n\t\t\t\tcurrentSubscription{\n\t\t\t\t\tpriceInfo{\n\t\t\t\t\t\tcurrent{\n\t\t\t\t\t\t\ttotal\n\t\t\t\t\t\t\tenergy\n\t\t\t\t\t\t\ttax\n\t\t\t\t\t\t\tstartsAt\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttoday {\n\t\t\t\t\t\t\ttotal\n\t\t\t\t\t\t\tenergy\n\t\t\t\t\t\t\ttax\n\t\t\t\t\t\t\tstartsAt\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttomorrow {\n\t\t\t\t\t\t\ttotal\n\t\t\t\t\t\t\tenergy\n\t\t\t\t\t\t\ttax\n\t\t\t\t\t\t\tstartsAt\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n  }`;\n\n\tfunction handleData(data) {\n\t\tconsole.log(data);\n\t\tsetTodaysPrices(\n\t\t\tdata['viewer']['homes'][0]['currentSubscription']['priceInfo']['today']\n\t\t);\n\t\tsetTomorrowsPrices(\n\t\t\tdata['viewer']['homes'][0]['currentSubscription']['priceInfo']['tomorrow']\n\t\t);\n\t\tsetCurrentPrice(\n\t\t\tdata['viewer']['homes'][0]['currentSubscription']['priceInfo']['current']\n\t\t);\n\t}\n\n\tasync function getPrices() {\n\t\tconsole.log('Submitting');\n\t\tlet response = fetch('https://api.tibber.com/v1-beta/gql', {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\tAuthorization: 'Bearer QjAfeE7K_2jwxTx0k0TeSd7B_LUZjgYCqd-51M8BAtg',\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t},\n\t\t\tbody: JSON.stringify({ query }),\n\t\t});\n\t\tresponse.then((res) => res.json()).then((data) => handleData(data['data']));\n\t}\n\n\tuseEffect(() => {\n\t\tgetPrices();\n\t}, []);\n\n\tuseEffect(() => {\n\t\tconsole.log(currentPrice);\n\t\tconsole.log(todaysPrices);\n\t\tconsole.log(tomorrowsPrices);\n\t}, [currentPrice]);\n\n\treturn (\n\t\t<div className='App'>\n\t\t\t{currentPrice && <CurrentPrice currentPrice={currentPrice} />}\n\t\t\t{/*todaysPrices && <TodaysPrices todaysPrices={todaysPrices} />*/}\n\t\t\t{tomorrowsPrices && (\n\t\t\t\t<h1 className='tomorrowsPrices'>Have tomorrows prices</h1>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}