{"ast":null,"code":"import _regeneratorRuntime from\"/home/leo/Dokument/GitHub/tibber/tibber-webapp/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/leo/Dokument/GitHub/tibber/tibber-webapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/leo/Dokument/GitHub/tibber/tibber-webapp/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'./App.css';import CurrentPrice from'./components/CurrentPrice';import Prices from'./components/Prices';import TodaysPrices from'./components/TodaysPrices';import TomorrowsPrices from'./components/TomorrowsPrices';import React,{useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),currentPrice=_useState2[0],setCurrentPrice=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),todaysPrices=_useState4[0],setTodaysPrices=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),tomorrowsPrices=_useState6[0],setTomorrowsPrices=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),separate=_useState8[0],setSeparate=_useState8[1];var doSeparation=function doSeparation(){if(separate){setSeparate(false);}else{setSeparate(true);}};var query=\"query{\\n\\t\\tviewer {\\n\\t\\t\\thomes {\\n\\t\\t\\t\\tcurrentSubscription{\\n\\t\\t\\t\\t\\tpriceInfo{\\n\\t\\t\\t\\t\\t\\tcurrent{\\n\\t\\t\\t\\t\\t\\t\\ttotal\\n\\t\\t\\t\\t\\t\\t\\tenergy\\n\\t\\t\\t\\t\\t\\t\\ttax\\n\\t\\t\\t\\t\\t\\t\\tstartsAt\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\ttoday {\\n\\t\\t\\t\\t\\t\\t\\ttotal\\n\\t\\t\\t\\t\\t\\t\\tenergy\\n\\t\\t\\t\\t\\t\\t\\ttax\\n\\t\\t\\t\\t\\t\\t\\tstartsAt\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\ttomorrow {\\n\\t\\t\\t\\t\\t\\t\\ttotal\\n\\t\\t\\t\\t\\t\\t\\tenergy\\n\\t\\t\\t\\t\\t\\t\\ttax\\n\\t\\t\\t\\t\\t\\t\\tstartsAt\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n  }\";function handleData(data){console.log(data);setTodaysPrices(data['viewer']['homes'][0]['currentSubscription']['priceInfo']['today']);setTomorrowsPrices(data['viewer']['homes'][0]['currentSubscription']['priceInfo']['tomorrow']);setCurrentPrice(data['viewer']['homes'][0]['currentSubscription']['priceInfo']['current']);}function getPrices(){return _getPrices.apply(this,arguments);}function _getPrices(){_getPrices=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log('Submitting');response=fetch('https://api.tibber.com/v1-beta/gql',{method:'POST',headers:{Authorization:'Bearer QjAfeE7K_2jwxTx0k0TeSd7B_LUZjgYCqd-51M8BAtg','Content-Type':'application/json'},body:JSON.stringify({query:query})});response.then(function(res){return res.json();}).then(function(data){return handleData(data['data']);});case 3:case\"end\":return _context.stop();}}},_callee);}));return _getPrices.apply(this,arguments);}useEffect(function(){getPrices();},[]);useEffect(function(){console.log(currentPrice);console.log(todaysPrices);console.log(tomorrowsPrices);},[currentPrice]);return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[currentPrice&&/*#__PURE__*/_jsx(CurrentPrice,{currentPrice:currentPrice}),todaysPrices&&tomorrowsPrices&&!separate&&/*#__PURE__*/_jsx(Prices,{todaysPrices:todaysPrices,tomorrowsPrices:tomorrowsPrices}),todaysPrices&&separate&&/*#__PURE__*/_jsx(TodaysPrices,{todaysPrices:todaysPrices}),tomorrowsPrices&&separate&&/*#__PURE__*/_jsx(TomorrowsPrices,{tomorrowsPrices:tomorrowsPrices}),/*#__PURE__*/_jsx(\"button\",{className:'separationButton',onClick:function onClick(){doSeparation();},children:separate?'Join':'Separate'})]});}export default App;","map":{"version":3,"sources":["/home/leo/Dokument/GitHub/tibber/tibber-webapp/src/App.js"],"names":["CurrentPrice","Prices","TodaysPrices","TomorrowsPrices","React","useState","useEffect","App","currentPrice","setCurrentPrice","todaysPrices","setTodaysPrices","tomorrowsPrices","setTomorrowsPrices","separate","setSeparate","doSeparation","query","handleData","data","console","log","getPrices","response","fetch","method","headers","Authorization","body","JSON","stringify","then","res","json"],"mappings":"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","sourcesContent":["import './App.css';\nimport CurrentPrice from './components/CurrentPrice';\nimport Prices from './components/Prices';\nimport TodaysPrices from './components/TodaysPrices';\nimport TomorrowsPrices from './components/TomorrowsPrices';\nimport React, { useState, useEffect } from 'react';\n\nfunction App() {\n\tconst [currentPrice, setCurrentPrice] = useState(null);\n\tconst [todaysPrices, setTodaysPrices] = useState(null);\n\tconst [tomorrowsPrices, setTomorrowsPrices] = useState(null);\n\tconst [separate, setSeparate] = useState(false);\n\n\tconst doSeparation = () => {\n\t\tif (separate) {\n\t\t\tsetSeparate(false);\n\t\t} else {\n\t\t\tsetSeparate(true);\n\t\t}\n\t};\n\n\tconst query = `query{\n\t\tviewer {\n\t\t\thomes {\n\t\t\t\tcurrentSubscription{\n\t\t\t\t\tpriceInfo{\n\t\t\t\t\t\tcurrent{\n\t\t\t\t\t\t\ttotal\n\t\t\t\t\t\t\tenergy\n\t\t\t\t\t\t\ttax\n\t\t\t\t\t\t\tstartsAt\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttoday {\n\t\t\t\t\t\t\ttotal\n\t\t\t\t\t\t\tenergy\n\t\t\t\t\t\t\ttax\n\t\t\t\t\t\t\tstartsAt\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttomorrow {\n\t\t\t\t\t\t\ttotal\n\t\t\t\t\t\t\tenergy\n\t\t\t\t\t\t\ttax\n\t\t\t\t\t\t\tstartsAt\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n  }`;\n\n\tfunction handleData(data) {\n\t\tconsole.log(data);\n\t\tsetTodaysPrices(\n\t\t\tdata['viewer']['homes'][0]['currentSubscription']['priceInfo']['today']\n\t\t);\n\t\tsetTomorrowsPrices(\n\t\t\tdata['viewer']['homes'][0]['currentSubscription']['priceInfo']['tomorrow']\n\t\t);\n\t\tsetCurrentPrice(\n\t\t\tdata['viewer']['homes'][0]['currentSubscription']['priceInfo']['current']\n\t\t);\n\t}\n\n\tasync function getPrices() {\n\t\tconsole.log('Submitting');\n\t\tlet response = fetch('https://api.tibber.com/v1-beta/gql', {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\tAuthorization: 'Bearer QjAfeE7K_2jwxTx0k0TeSd7B_LUZjgYCqd-51M8BAtg',\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t},\n\t\t\tbody: JSON.stringify({ query }),\n\t\t});\n\t\tresponse.then((res) => res.json()).then((data) => handleData(data['data']));\n\t}\n\n\tuseEffect(() => {\n\t\tgetPrices();\n\t}, []);\n\n\tuseEffect(() => {\n\t\tconsole.log(currentPrice);\n\t\tconsole.log(todaysPrices);\n\t\tconsole.log(tomorrowsPrices);\n\t}, [currentPrice]);\n\n\treturn (\n\t\t<div className='App'>\n\t\t\t{currentPrice && <CurrentPrice currentPrice={currentPrice} />}\n\t\t\t{todaysPrices && tomorrowsPrices && !separate && (\n\t\t\t\t<Prices todaysPrices={todaysPrices} tomorrowsPrices={tomorrowsPrices} />\n\t\t\t)}\n\t\t\t{todaysPrices && separate && <TodaysPrices todaysPrices={todaysPrices} />}\n\t\t\t{tomorrowsPrices && separate && (\n\t\t\t\t<TomorrowsPrices tomorrowsPrices={tomorrowsPrices} />\n\t\t\t)}\n\t\t\t<button\n\t\t\t\tclassName={'separationButton'}\n\t\t\t\tonClick={() => {\n\t\t\t\t\tdoSeparation();\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{separate ? 'Join' : 'Separate'}\n\t\t\t</button>\n\t\t</div>\n\t);\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}